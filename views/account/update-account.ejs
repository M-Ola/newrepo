<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../partials/head') %>
  
</head>
<body>
  <div class="background"></div>
  <div id="wrapper">
    <%- include('../partials/header') %>
    <%- include('../partials/navigation') %>

    <main class="account-container">
      <h1><%= title %></h1>

      <% if (typeof message !== 'undefined' && message.length > 0) { %>
        <div class="flash-message"><%= message %></div>
      <% } %>

      <% if (errors && errors.length > 0) { %>
        <div class="error-list">
          <ul class="notice">
            <% errors.forEach(error => { %>
              <li><%= error.msg %></li>
            <% }) %>
          </ul>
        </div>
      <% } %>

      <!-- Account Update Form -->
      <section class="form-section">
        <h2>Update Account Information</h2>
        <form action="/account/update/<%= account.account_id %>" method="POST" class="update-form">
          <div class="form-group">
            <label for="account_firstname">First Name</label>
            <input type="text" id="account_firstname" name="account_firstname"
                   value="<%= typeof account_firstname !== 'undefined' ? account_firstname : account.account_firstname %>"
                   required>
          </div>

          <div class="form-group">
            <label for="account_lastname">Last Name</label>
            <input type="text" id="account_lastname" name="account_lastname"
                   value="<%= typeof account_lastname !== 'undefined' ? account_lastname : account.account_lastname %>"
                   required>
          </div>

          <div class="form-group">
            <label for="account_email">Email</label>
            <input type="email" id="account_email" name="account_email"
                   value="<%= typeof account_email !== 'undefined' ? account_email : account.account_email %>"
                   required>
          </div>

          <input type="hidden" name="account_id" value="<%= account.account_id %>">

          <button type="submit" class="btn-primary">Update Account</button>
        </form>
      </section>

      <!-- Change Password Form -->
      <section class="form-section">
        <h2>Change Password</h2>
        <p class="form-hint">Enter a new password to replace your current one. Passwords must be at least 8 characters and include a mix of letters, numbers, and symbols.</p>
        <form action="/account/update-password/<%= account.account_id %>" method="POST" class="update-form">
          <div class="form-group">
            <label for="account_password">New Password</label>
            <input type="password" id="account_password" name="account_password"
                   minlength="8" required>
          </div>

          <input type="hidden" name="account_id" value="<%= account.account_id %>">

          <button type="submit" class="btn-primary">Change Password</button>
        </form>
      </section>
    </main>

    <%- include('../partials/footer') %>
  </div>
</body>
</html>
