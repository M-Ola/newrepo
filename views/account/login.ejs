<%- include('../partials/head') %>
  <body>
    <div class="background"></div>
    <div id="wrapper">
      <%- include('../partials/header') %> 
      <%- include('../partials/navigation')%>

      <main class="login-container">
        <h1><%= title %></h1>

         <%- messages() %>
         

 <% if (errors && errors.length > 0) { %>
  <div class="error-list">
    <ul class="notice">
      <% errors.forEach(error => { %>
        <li><%= error.msg %></li>
      <% }) %>
    </ul>
  </div>
<% } %>

<form id="loginForm"  action="/account/login" method="post" class="login-form">
  <label for="account_email">Email:</label>
  <input
    type="email"
    id="account_email"
    name="account_email"
    required value="<%= locals.account_email %>" />


<label for="account_password">Password:</label>
  <div class="password-wrapper">
    <input
      type="password"
      id="account_password"
      name="account_password"
      required pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
      title="Must be at least 12 characters, include 1 uppercase letter, 1 number, and 1 special character.">
    <button type="button" id="togglePassword">Show Password</button>
  </div>

  <p class="password-hint">
    Passwords must be a minimum of 12 characters and include 1 capital letter, 1 number, and 1 special character.
  </p>

  <button type="submit">LOGIN</button>
</form>


        <p class="signup-link">
          No account? <a href="/account/register">Sign-up</a>
        </p>
      </main>

      <%- include('../partials/footer') %>
    </div>
 
 
  <script>
      const toggleBtn = document.getElementById("togglePassword");
      const passwordInput = document.getElementById("account_password");

      toggleBtn.addEventListener("click", () => {
        const isHidden = passwordInput.type === "password";
        passwordInput.type = isHidden ? "text" : "password";
        toggleBtn.textContent = isHidden ? "Hide Password" : "Show Password";
      });
    </script>
  </body>
</html>
